# ST-Manager-serverplugin

SillyTavern èµ„æºç®¡ç†ä¸è‡ªåŠ¨åŒ–å·¥å…· - å®Œæ•´é›†æˆæ’ä»¶

## âœ¨ åŠŸèƒ½

### ğŸ“Š èµ„æºç®¡ç†
- **è§’è‰²å¡ç®¡ç†** - æµè§ˆã€æœç´¢ã€ç¼–è¾‘è§’è‰²å¡
- **ä¸–ç•Œä¹¦ç®¡ç†** - æŸ¥çœ‹å’Œç®¡ç†ä¸–ç•Œä¹¦æ¡ç›®
- **é¢„è®¾ç®¡ç†** - ç®¡ç†é¢„è®¾åŠå…¶ç»‘å®šæ­£åˆ™
- **æ­£åˆ™è„šæœ¬ç®¡ç†** - å…¨å±€å’Œé¢„è®¾ç»‘å®šæ­£åˆ™ç®¡ç†

### ğŸ’¾ å¤‡ä»½ä¸æ¢å¤
- **ä¸€é”®å¤‡ä»½** - æ”¯æŒå…¨é‡å’Œå¢é‡å¤‡ä»½
- **å®šæ—¶å¤‡ä»½** - æ¯æ—¥/æ¯å‘¨è‡ªåŠ¨å¤‡ä»½
- **å¤‡ä»½æ¢å¤** - ä»å†å²å¤‡ä»½æ¢å¤æ•°æ®
- **è¿‡æœŸæ¸…ç†** - è‡ªåŠ¨æ¸…ç†è¿‡æœŸå¤‡ä»½

### âš™ï¸ è‡ªåŠ¨åŒ–è§„åˆ™
- **æ¡ä»¶åŒ¹é…** - å¤šæ¡ä»¶ç»„åˆåŒ¹é…è§’è‰²å¡
- **æ‰¹é‡æ“ä½œ** - æ‰¹é‡æ·»åŠ æ ‡ç­¾ã€ç§»åŠ¨æ–‡ä»¶å¤¹
- **è§„åˆ™é¢„è§ˆ** - æ‰§è¡Œå‰é¢„è§ˆåŒ¹é…ç»“æœ
- **è§„åˆ™é›†ç®¡ç†** - ä¿å­˜å’Œå¤ç”¨è§„åˆ™é›†

## ğŸ†• æœ€è¿‘æ›´æ–°ï¼ˆå¯¹é½ ST-Managerï¼‰

### æœ¬è½®å¯¹é½ï¼ˆæœåŠ¡ç«¯æ ¸å¿ƒé“¾è·¯ï¼‰
- **`/api/update_card` å¯¹é½**ï¼šå·²æ”¹ä¸ºç»Ÿä¸€èµ° `cards.updateCard`ï¼Œæ”¯æŒ **JSON/PNG** å¡ç‰‡å…ƒæ•°æ®å†™å›ï¼Œä¸å†é™åˆ¶ PNG ä»…åªè¯»ã€‚
- **PNG å…ƒæ•°æ®å†™å›è¡¥é½**ï¼š`server/modules/cards.js` æ–°å¢ PNG chunk çº§å†™å…¥èƒ½åŠ›ï¼ˆé‡å†™ `chara` å…ƒæ•°æ®ï¼Œä¿ç•™å…¶ä»– chunkï¼‰ï¼Œå¹¶å…¼å®¹ `chara/ccv3` è¯»å–ã€‚
- **æ ‡ç­¾å†™å›è¡¥é½**ï¼š`cards.addTags/removeTags` ä»å ä½å®ç°å‡çº§ä¸ºçœŸå®å†™å›ï¼Œæ”¯æŒ **JSON/PNG** åŒæ ¼å¼ã€‚
- **æ‰¹é‡æ ‡ç­¾æ¥å£ä¿®å¤**ï¼š`/api/batch_tags` æ”¹ä¸ºåˆå¹¶å¤„ç† `add/remove`ï¼Œå¹¶è¿”å›å»é‡åçš„çœŸå® `updated` æ•°ã€‚
- **åˆ é™¤æ ‡ç­¾ç»Ÿè®¡ä¿®å¤**ï¼š`/api/delete_tags` ä½¿ç”¨åº•å±‚çœŸå®æ›´æ–°è®¡æ•°ï¼Œé¿å…åªæŒ‰â€œè¯·æ±‚å‚æ•°â€ç»Ÿè®¡ã€‚
- **è‡ªåŠ¨åŒ–æ ‡ç­¾æ‰§è¡Œä¿®å¤**ï¼š`automation.execute` çš„æ ‡ç­¾åŠ¨ä½œæ”¹ä¸ºå¤ç”¨ `cards` æ¨¡å—ï¼Œå®ç°å¯¹ PNG/JSON ä¸€è‡´ç”Ÿæ•ˆã€‚
- **æ”¶è—åˆ‡æ¢ä¸‹æ²‰åˆ° cards æ¨¡å—**ï¼šæ–°å¢ `cards.toggleFavorite`ï¼Œä¸ `/api/toggle_favorite` å¯¹é½ã€‚

### æœ¬è½®ç»§ç»­è¡¥é½ï¼ˆå¯¼å…¥/æ›´æ–°/èšåˆï¼‰
- **URL å¯¼å…¥è¡¥é½**ï¼š`/api/import_from_url` å·²å®ç°ä¸‹è½½ã€ä¸´æ—¶æ–‡ä»¶å¤ç”¨ã€å†²çªæ£€æµ‹ï¼ˆcheck/rename/overwrite/cancelï¼‰ä¸æœ€ç»ˆè½åº“è¿”å›ã€‚
- **å¡ç‰‡æ–‡ä»¶æ›´æ–°è¡¥é½**ï¼š`/api/update_card_file` å·²å®ç° multipart è§£æã€JSON/PNG è¦†ç›–æˆ–æ‰©å±•ååˆ‡æ¢ã€UI æ•°æ®ä¿ç•™ã€`updated_card` è¿”å›ã€‚
- **URL æ›´æ–°è¡¥é½**ï¼š`/api/update_card_from_url` å·²å®ç°è¿œç¨‹ä¸‹è½½å¹¶å¤ç”¨æ–‡ä»¶æ›´æ–°æµç¨‹ã€‚
- **æ›´æ¢å¤´åƒè¡¥é½**ï¼š`/api/change_image` å·²å®ç° FormData ä¸Šä¼ ï¼›æ”¯æŒ JSON/PNG å¡ç‰‡çš„å¸¸è§æ¢å›¾æµç¨‹ä¸å¿…è¦çš„ ID è¿ç§»ã€‚
- **ä¸€é”®è½¬åŒ…è¡¥é½**ï¼š`/api/convert_to_bundle` å·²æ¥å…¥ `cards.convertToBundle`ï¼ˆç§»åŠ¨å¡ç‰‡åˆ°æ–°åŒ…ç›®å½•å¹¶å†™ `.bundle` æ ‡è®°ï¼‰ã€‚
- **èšåˆå¼€å…³è¡¥é½**ï¼š`/api/toggle_bundle_mode` å·²æ¥å…¥ `cards.toggleBundleMode`ï¼ˆcheck/enable/disable åŸºç¡€æµç¨‹ï¼‰ã€‚
- **åˆ†é¡µå®šä½è¡¥é½**ï¼šæ–°å¢ `cards.findCardPage`ï¼Œ`/api/find_card_page` ä¸å†å›ºå®šè¿”å›ç¬¬ 1 é¡µã€‚
- **å‰©ä½™å ä½ç«¯ç‚¹æ¸…ç†**ï¼šè‡ªåŠ¨åŒ–è§„åˆ™é›†ä¿å­˜/åˆ é™¤ã€å¤‡ä»½åˆ›å»º/æ¢å¤æ¥å£æ”¹ä¸ºçœŸå®æ¨¡å—è°ƒç”¨ï¼Œä¸å†èµ°â€œåŠŸèƒ½æœªå®ç°â€å ä½è¿”å›ã€‚
- **æ–‡ä»¶ç§»åŠ¨ç¨³å¥æ€§å¢å¼º**ï¼šé’ˆå¯¹ Windows ç¯å¢ƒ `EPERM`ï¼Œå¡ç‰‡ä¸å¯¼å…¥é“¾è·¯åŠ å…¥ `rename -> copy` å›é€€ï¼Œé¿å…æ›´æ–°/å¯¼å…¥/è½¬åŒ…ä¸­æ–­ã€‚

### å…³é”®ä¿®å¤
- **è‡ªåŠ¨åŒ–æ‰§è¡Œä¿®å¤**ï¼š`/api/automation/execute` ä¸å†åªåšé¢„è§ˆï¼Œç°å¯çœŸå®æ‰§è¡Œç§»åŠ¨ã€æ ‡ç­¾å¢åˆ ã€æ”¶è—çŠ¶æ€æ›´æ–°ã€‚
- **è‡ªåŠ¨åŒ–ç­›é€‰ä¿®å¤**ï¼šæ”¯æŒæŒ‰ `category + recursive` æ‰¹é‡æ‰§è¡Œè§„åˆ™ï¼Œå’Œ WebUI çš„æ–‡ä»¶å¤¹æ‰§è¡Œæ¨¡å¼ä¸€è‡´ã€‚
- **é…ç½®å…¼å®¹ä¿®å¤**ï¼šç»Ÿä¸€å¹¶è¡¥é½é»˜è®¤é…ç½®å­—æ®µï¼ˆåˆ†é¡µã€å¿«ç…§ã€è®¤è¯ã€èµ„æºç™½åå•ã€è‡ªåŠ¨åŒ–å…¨å±€è§„åˆ™ç­‰ï¼‰ï¼Œå…¼å®¹æ—§ç‰ˆ `config.json` ç»“æ„ã€‚
- **è·¯å¾„æƒé™ä¿®å¤**ï¼šè¯»å–æ¥å£å¯è¯†åˆ« `allowed_abs_resource_roots`ï¼Œå¯è®¿é—®ç™½åå•ä¸­çš„ç»å¯¹èµ„æºè·¯å¾„ã€‚

### æ–°å¢æ¥å£
- `POST /api/presets/save`ï¼šä¿å­˜/æ›´æ–°é¢„è®¾å†…å®¹ã€‚
- `POST /api/export_worldbook_single`ï¼šä»è§’è‰²å¡å¯¼å‡ºå•ç‹¬ä¸–ç•Œä¹¦ JSONã€‚

### WebUI å¯¹é½å¢å¼º
- å®Œæˆ/å¢å¼ºäº†å¤šé¡¹ ST-Manager WebUI API å…¼å®¹ç«¯ç‚¹ï¼ˆå«å¤‡ä»½å¿«ç…§ã€é¢„è®¾ã€æ‰©å±•ã€ä¸–ç•Œä¹¦å‰ªè´´æ¿ã€æ‰¹é‡ä¸Šä¼ ç­‰ï¼‰ã€‚
- `automation` è¿”å›ç»“æ„å…¼å®¹å‰ç«¯å­—æ®µï¼ˆ`items/data/ruleset_id` ç­‰å¸¸ç”¨æ ¼å¼ï¼‰ã€‚

## ğŸ“¦ å®‰è£…

### æ–¹å¼ Aï¼šä½œä¸º SillyTavern æ’ä»¶ï¼ˆæ¨èï¼‰

#### 1. å¯ç”¨æœåŠ¡ç«¯æ’ä»¶

ç¼–è¾‘ SillyTavern çš„ `config.yaml`ï¼š

```yaml
enableServerPlugins: true
```

#### 2. å…‹éš†æ’ä»¶ä»“åº“

```bash
cd SillyTavern/plugins
git clone https://github.com/Youzini-afk/ST-Manager-serverplugin.git
```

#### 3. å®‰è£…ä¾èµ–

**Windows (PowerShell):**
```powershell
cd ST-Manager-serverplugin
.\install.ps1
```

**Linux/Mac:**
```bash
cd ST-Manager-serverplugin
chmod +x install.sh
./install.sh
```

æˆ–æ‰‹åŠ¨å®‰è£…ï¼š
```bash
cd ST-Manager-serverplugin
npm install
```

#### 4. é‡å¯ SillyTavern

é‡å¯åï¼š
- âœ… æœåŠ¡ç«¯æ’ä»¶è‡ªåŠ¨åŠ è½½
- âœ… å‰ç«¯æ‰©å±•è‡ªåŠ¨å®‰è£…åˆ° `public/scripts/extensions/ST-Manager/`
- âœ… å‰ç«¯æ–‡ä»¶å·²é¢„æ„å»ºï¼Œæ— éœ€æ‰‹åŠ¨ npm build

æ§åˆ¶å°ä¼šæ˜¾ç¤ºï¼š
```
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  ğŸŒ ST Manager Web UI å·²å¯åŠ¨
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  âœ… Web UI: http://localhost:5000
  ğŸ“¡ SillyTavern API: http://localhost:8000/api/plugins/st-manager
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

#### 5. è®¿é—® Web UI

- **å®Œæ•´ Web UI**: http://localhost:5000 ï¼ˆåŠŸèƒ½å®Œæ•´çš„èµ„æºç®¡ç†ç•Œé¢ï¼‰
- **é…’é¦†æ‰©å±•é¢æ¿**: åœ¨é…’é¦† Extensions æ ‡ç­¾é¡µä¸­å¯ç”¨ ST Managerï¼ˆç²¾ç®€ç‰ˆï¼‰

---

### ğŸ”„ æ›´æ–°æ’ä»¶

```bash
cd SillyTavern/plugins/ST-Manager-serverplugin
git pull
npm install  # æ›´æ–°ä¾èµ–
# ç„¶åé‡å¯ SillyTavern
```

---

### ğŸ”§ å¼€å‘è€…ï¼šé‡æ–°æ„å»ºå‰ç«¯

ä»…åœ¨ä¿®æ”¹å‰ç«¯ä»£ç æ—¶éœ€è¦ï¼š
```bash
cd ST-Manager-serverplugin/client
npm install
npx vite build
```

## ğŸ“ ç›®å½•ç»“æ„

```
ST-Manager-serverplugin/
â”œâ”€â”€ package.json           # æ’ä»¶å…ƒä¿¡æ¯
â”œâ”€â”€ README.md              # æœ¬æ–‡æ¡£
â”œâ”€â”€ server/                # æœåŠ¡ç«¯æ’ä»¶
â”‚   â”œâ”€â”€ index.js           # å…¥å£æ–‡ä»¶
â”‚   â”œâ”€â”€ modules/           # åŠŸèƒ½æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ backup.js      # å¤‡ä»½æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ cards.js       # è§’è‰²å¡ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ presets.js     # é¢„è®¾ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ regex.js       # æ­£åˆ™è„šæœ¬ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ extensions.js  # æ‰©å±•ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ worldInfo.js   # ä¸–ç•Œä¹¦ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ resources.js   # èµ„æºèšåˆ
â”‚   â”‚   â”œâ”€â”€ automation.js  # è‡ªåŠ¨åŒ–è§„åˆ™
â”‚   â”‚   â””â”€â”€ config.js      # é…ç½®ç®¡ç†
â”‚   â””â”€â”€ webui/             # å®Œæ•´ Web UIï¼ˆä¸€æ¯”ä¸€å¤åˆ» Python ç‰ˆï¼‰
â”‚       â”œâ”€â”€ api.js         # API å…¼å®¹å±‚
â”‚       â”œâ”€â”€ static/        # é™æ€èµ„æºï¼ˆCSS, JS, å›¾ç‰‡ï¼‰
â”‚       â””â”€â”€ templates/     # Nunjucks æ¨¡æ¿ï¼ˆJinja2 å…¼å®¹ï¼‰
â””â”€â”€ client/                # é…’é¦†æ‰©å±•é¢æ¿ï¼ˆç²¾ç®€ç‰ˆï¼‰
    â”œâ”€â”€ src/               # æºç 
    â”œâ”€â”€ dist/              # æ„å»ºäº§ç‰©
    â””â”€â”€ package.json       # å‰ç«¯ä¾èµ–
```

## ğŸ—‚ï¸ æ’ä»¶å­˜å‚¨ç»“æ„

æ’ä»¶è¿è¡Œæ—¶çš„æ•°æ®ç»Ÿä¸€å­˜æ”¾åœ¨æ’ä»¶ç›®å½•å†…ï¼š

```
SillyTavern/plugins/ST-Manager-serverplugin/data/
â”œâ”€â”€ config.json                 # æ’ä»¶é…ç½®
â”œâ”€â”€ system/
â”‚   â”œâ”€â”€ automation/             # è‡ªåŠ¨åŒ–è§„åˆ™é›†
â”‚   â”œâ”€â”€ db/
â”‚   â”‚   â””â”€â”€ ui_data.json         # UI ç»‘å®š/èµ„æºç›®å½•æ˜ å°„
â”‚   â”œâ”€â”€ thumbnails/             # ç¼©ç•¥å›¾ç¼“å­˜ï¼ˆé¢„ç•™ï¼‰
â”‚   â””â”€â”€ trash/                  # å›æ”¶ç«™/è½¯åˆ é™¤ï¼ˆé¢„ç•™ï¼‰
â””â”€â”€ temp/                       # ä¸´æ—¶æ–‡ä»¶
```

è¯´æ˜ï¼š
- é»˜è®¤å·¥ä½œæµæ˜¯å…ˆåœ¨æ’ä»¶ç§æœ‰åº“ `data/library` ç®¡ç†èµ„æºã€‚
- èµ„æºç›®å½•æ”¯æŒç»‘å®šç»å¯¹è·¯å¾„ï¼›åœ¨ç™½åå•ä¸æ¥å£å…è®¸èŒƒå›´å†…ï¼Œå¯æ“ä½œé…’é¦†æœ¬ä½“èµ„æºç›®å½•ï¼ˆç”¨äºâ€œä¿å­˜åˆ°é…’é¦†â€ç­‰åœºæ™¯ï¼‰ã€‚
- ST èµ„æºåŒæ­¥ä»ä»¥æ’ä»¶åº“ä¸ºè½ç‚¹ï¼›â€œå†™å›é…’é¦†æœ¬ä½“ç›®å½•â€ä¸»è¦é€šè¿‡èµ„æºç›®å½•ç»‘å®šä¸ä¿å­˜ç±»æ¥å£å®ç°ã€‚
- æ—§æ•°æ®ç›®å½• `SillyTavern/data/plugins/st-manager` ä¼šåœ¨é¦–æ¬¡å¯åŠ¨æ—¶è‡ªåŠ¨è¿ç§»ï¼ˆé…ç½®ä¸ UI æ•°æ®ï¼‰ã€‚

## ğŸ”„ åŒæ­¥æœºåˆ¶

ä» SillyTavern åŒæ­¥èµ„æºåˆ°æ’ä»¶ç§æœ‰å­˜å‚¨æ—¶çš„å»é‡ç­–ç•¥ï¼š

| èµ„æºç±»å‹ | å»é‡æ–¹å¼ | åŒåæ›´æ–°è¡Œä¸º |
|----------|----------|-------------|
| **è§’è‰²å¡** | æ—¶é—´æˆ³ + æ–‡ä»¶å¤§å° | è¦†ç›–ï¼ˆå¦‚æœæºæ–‡ä»¶è¾ƒæ–°ï¼‰ |
| **ä¸–ç•Œä¹¦** | æ—¶é—´æˆ³ + æ–‡ä»¶å¤§å° | è¦†ç›–ï¼ˆå¦‚æœæºæ–‡ä»¶è¾ƒæ–°ï¼‰ |
| **é¢„è®¾** | æ—¶é—´æˆ³ + æ–‡ä»¶å¤§å° | è¦†ç›–ï¼ˆå¦‚æœæºæ–‡ä»¶è¾ƒæ–°ï¼‰ |
| **å¿«é€Ÿå›å¤** | æ—¶é—´æˆ³ + æ–‡ä»¶å¤§å° | è¦†ç›–ï¼ˆå¦‚æœæºæ–‡ä»¶è¾ƒæ–°ï¼‰ |
| **å…¨å±€æ­£åˆ™** | å†…å®¹ç­¾å | åˆ›å»ºæ–°ç‰ˆæœ¬æ–‡ä»¶ï¼ˆå¦‚ `global__è„šæœ¬å__1.json`ï¼‰ |

### åŒæ­¥æµç¨‹

```
SillyTavern åŸå§‹æ•°æ®              æ’ä»¶ç§æœ‰å­˜å‚¨
(data/default-user/)    â”€â”€åŒæ­¥â”€â”€>  (plugins/ST-Manager-serverplugin/data/library/)
â”œâ”€â”€ characters/*          â†’        â”œâ”€â”€ characters/*
â”œâ”€â”€ worlds/*              â†’        â”œâ”€â”€ lorebooks/*
â”œâ”€â”€ OpenAI Settings/*     â†’        â”œâ”€â”€ presets/*
â”œâ”€â”€ regex/*               â†’        â””â”€â”€ extensions/regex/*
â””â”€â”€ settings.json å…¨å±€æ­£åˆ™ â†’            â””â”€â”€ global__*.json
```

è®¾è®¡æ„å›¾ï¼š
- **æ™®é€šèµ„æº**ï¼šåŸºäºæ–‡ä»¶ååˆ¤æ–­ï¼Œæºæ–‡ä»¶æ›´æ–°æ—¶è¦†ç›–ç›®æ ‡
- **å…¨å±€æ­£åˆ™**ï¼šå› å­˜å‚¨åœ¨ settings.json ä¸­ï¼Œå¯¼å‡ºä¸ºç‹¬ç«‹ JSON æ–‡ä»¶ï¼Œæ”¯æŒå¤šç‰ˆæœ¬ä¿ç•™

## ğŸ”Œ API ç«¯ç‚¹

æ‰€æœ‰ç«¯ç‚¹å‰ç¼€ï¼š`/api/plugins/st-manager`

### åŸºç¡€

| ç«¯ç‚¹ | æ–¹æ³• | æè¿° |
|------|------|------|
| `/health` | GET | å¥åº·æ£€æŸ¥ |
| `/stats` | GET | èµ„æºç»Ÿè®¡ |
| `/config` | GET/POST | è·å–/æ›´æ–°é…ç½® |

### èµ„æº

| ç«¯ç‚¹ | æ–¹æ³• | æè¿° |
|------|------|------|
| `/cards/list` | GET | è§’è‰²å¡åˆ—è¡¨ |
| `/worldbooks/list` | GET | ä¸–ç•Œä¹¦åˆ—è¡¨ |
| `/presets/list` | GET | é¢„è®¾åˆ—è¡¨ |
| `/presets/regex/:presetId` | GET | é¢„è®¾ç»‘å®šçš„æ­£åˆ™ |

### æ­£åˆ™è„šæœ¬ï¼ˆå…¨å±€ä¸é¢„è®¾ç»‘å®šï¼‰

| ç«¯ç‚¹ | æ–¹æ³• | æè¿° |
|------|------|------|
| `/regex/global` | GET | è·å–å…¨å±€æ­£åˆ™ï¼ˆä» settings.jsonï¼‰ |
| `/regex/scripts` | GET | åˆ—å‡ºæ­£åˆ™è„šæœ¬æ–‡ä»¶ |
| `/regex/aggregate` | GET | æ±‡æ€»å…¨å±€ + é¢„è®¾ç»‘å®šæ­£åˆ™ |
| `/regex/extract-from-preset` | POST | ä»é¢„è®¾æ•°æ®æå–æ­£åˆ™ |
| `/regex/list` | GET | æ­£åˆ™è„šæœ¬åˆ—è¡¨ï¼ˆå…¼å®¹è·¯ç”±ï¼‰ |

### å¤‡ä»½

| ç«¯ç‚¹ | æ–¹æ³• | æè¿° |
|------|------|------|
| `/backup/trigger` | POST | è§¦å‘å¤‡ä»½ |
| `/backup/list` | GET | å¤‡ä»½åˆ—è¡¨ |
| `/backup/restore` | POST | æ¢å¤å¤‡ä»½ |
| `/backup/delete` | DELETE | åˆ é™¤å¤‡ä»½ |
| `/backup/schedule` | GET/POST | å¤‡ä»½è®¡åˆ’ |

### è‡ªåŠ¨åŒ–

| ç«¯ç‚¹ | æ–¹æ³• | æè¿° |
|------|------|------|
| `/automation/rulesets` | GET | è§„åˆ™é›†åˆ—è¡¨ |
| `/automation/ruleset/:id` | GET | è·å–è§„åˆ™é›† |
| `/automation/ruleset` | POST | ä¿å­˜è§„åˆ™é›† |
| `/automation/ruleset/:id` | DELETE | åˆ é™¤è§„åˆ™é›† |
| `/automation/preview` | POST | é¢„è§ˆè§„åˆ™ |
| `/automation/execute` | POST | æ‰§è¡Œè§„åˆ™ |

## ğŸ› ï¸ å¼€å‘

### æ¨¡å—è¯´æ˜

**regex.js** - æ­£åˆ™è„šæœ¬ç®¡ç†æ ¸å¿ƒæ¨¡å—

å®Œæ•´å¤åˆ» Python åç«¯çš„æ­£åˆ™å¤„ç†é€»è¾‘ï¼Œæ”¯æŒï¼š
- å…¨å±€æ­£åˆ™ï¼šä» `settings.json` ä¸­æå–å„ç§æ ¼å¼çš„å…¨å±€æ­£åˆ™è§„åˆ™
- é¢„è®¾ç»‘å®šæ­£åˆ™ï¼šä»é¢„è®¾æ–‡ä»¶ä¸­æå– `extensions.regex_scripts` ç­‰å­—æ®µ
- æ­£åˆ™æ ‡å‡†åŒ–ï¼šæ”¯æŒå¤šç§æ ¼å¼çš„æ­£åˆ™æ¡ç›®è‡ªåŠ¨æ ‡å‡†åŒ–
- æ­£åˆ™å»é‡ï¼šåŸºäº pattern/flags/replace çš„æ™ºèƒ½å»é‡
- æ­£åˆ™èšåˆï¼šæ±‡æ€»å…¨å±€ + é¢„è®¾ç»‘å®šçš„æ‰€æœ‰æ­£åˆ™è§„åˆ™

### æ„å»ºå‰ç«¯

```bash
cd client
npm install
npm run build
```

### è°ƒè¯•

æœåŠ¡ç«¯æ—¥å¿—ä¼šè¾“å‡ºåˆ° SillyTavern æ§åˆ¶å°ï¼Œå‰ç¼€ä¸º `[ST Manager]`ã€‚

## ğŸ“„ License

MIT

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

- GitHub: https://github.com/Youzini-afk/ST-Manager-serverplugin
